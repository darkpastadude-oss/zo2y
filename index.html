<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Zo2y — Discover Local Favorites</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabaseUrl = 'https://gfkhjbztayjyojsgdpgk.supabase.co'
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdma2hqYnp0YXlqeW9qc2dkcGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTYyNjQsImV4cCI6MjA3NTY3MjI2NH0.WUb2yDAwCeokdpWCPeH13FE8NhWF6G8e6ivTsgu6b2s'
        window.supabase = supabase.createClient(supabaseUrl, supabaseKey)
    </script>
    <style>
        :root {
            --bg: #ffffff; --card: #f8f9fa; --muted: #6c757d; --accent: #FF6F00;
            --accent-light: #ffddc1; --glass: rgba(0,0,0,0.03); --white: #000000;
            --border: rgba(0,0,0,0.08); --shadow: rgba(0,0,0,0.1);
            --gradient: linear-gradient(135deg, #FF6F00 0%, #FF8C42 100%);
        }
        [data-theme="dark"] {
            --bg: #1e2a4a; --card: #2d3748; --muted: #cbd5e1; --accent: #ff944d;
            --accent-light: #3a2a1a; --white: #ffffff; --border: rgba(255,255,255,0.1);
            --shadow: rgba(0,0,0,0.3);
        }
        *{box-sizing:border-box} html,body{height:100%} body{margin:0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--white); overflow-x:hidden; transition: background-color 0.3s ease, color 0.3s ease;} a{color:inherit; text-decoration:none} img{display:block; max-width:100%; height:auto}
        .nav{position:sticky; top:0; z-index:100; display:flex; align-items:center; gap:24px; padding:14px 28px; backdrop-filter: blur(12px); background: var(--glass); border-bottom: 1px solid var(--border); transition: all 0.3s ease;}
        .nav.scrolled {background: var(--card); box-shadow: 0 4px 20px var(--shadow);}
        .nav .left {display:flex; align-items:center; gap:18px;} .logo {height:44px; cursor:pointer; transition: transform 0.3s ease;} .logo:hover {transform: scale(1.05);}
        .search {width:520px; max-width:45vw; position:relative;} .search input {width:100%; padding:12px 16px 12px 48px; border-radius:999px; border:1px solid var(--border); background:var(--card); color:var(--white); outline:none; font-size:15px; box-shadow:0 4px 18px var(--shadow); transition: all 0.3s ease;} .search input:focus {border-color: var(--accent); box-shadow: 0 4px 20px rgba(255,111,0,0.15);}
        .search .icon {position:absolute; left:16px; top:50%; transform:translateY(-50%); opacity:0.85; font-size:18px;}
        .nav .right {margin-left:auto; display:flex; align-items:center; gap:14px;}
        .account-btn{background: var(--gradient); color:#111; padding:10px 18px; border-radius:20px; border:none; cursor:pointer; font-weight:700; box-shadow:0 8px 30px rgba(255,111,0,0.2); transition: transform 0.2s ease, box-shadow 0.2s ease; display: flex; align-items: center; gap: 8px;} .account-btn:hover {transform: translateY(-2px); box-shadow: 0 12px 35px rgba(255,111,0,0.3);}
        .nav a.ghost{color:var(--muted); padding:8px 12px; border-radius:8px; font-size:14px; transition: all 0.3s ease; font-weight: 500;} .nav a.ghost:hover{color:var(--accent); background: var(--accent-light);}
        .theme-toggle {background: var(--card); border: 1px solid var(--border); color: var(--white); padding: 8px 14px; border-radius: 20px; cursor: pointer; font-size: 14px; transition: all 0.3s ease; display: flex; align-items: center; gap: 6px;} .theme-toggle:hover {background: var(--accent); color: #111; transform: translateY(-1px);}
        .hero {position:relative; height:85vh; min-height:600px; display:flex; align-items:center; padding:60px 48px; gap:40px; overflow: hidden;} .hero-bg {position:absolute; inset:0; z-index:0; background: var(--bg); overflow:hidden;} .hero-bg-pattern {position: absolute; width: 100%; height: 100%; opacity: 0.03; background-image: radial-gradient(var(--accent) 1px, transparent 1px); background-size: 30px 30px;}
        .hero-inner {position:relative; z-index:6; display:flex; align-items:center; gap:48px; width:100%; max-width:1300px; margin:0 auto;} .hero-left {flex:1.1; min-width:320px;}
        .tag {display:inline-flex; align-items:center; gap:8px; color:var(--accent); font-weight:600; font-size:14px; letter-spacing:0.3px; background: var(--accent-light); padding:8px 16px; border-radius:999px; margin-bottom:24px; border: 1px solid rgba(255,111,0,0.1);} .tag::before {content: "✨";}
        h1 {font-size:52px; line-height:1.05; margin:0 0 16px 0; font-weight:800; letter-spacing:-0.8px; color:var(--white); background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;}
        .lead {color:var(--muted); font-size:18px; margin-bottom:28px; max-width:680px; line-height:1.6;}
        .stats {display: flex; gap: 24px; margin-bottom: 32px;} .stat {display: flex; flex-direction: column;} .stat-value {font-size: 24px; font-weight: 700; color: var(--accent);} .stat-label {font-size: 14px; color: var(--muted);}
        .cta-row {display:flex; gap:16px; align-items:center; flex-wrap: wrap;}
        .btn-primary {background: var(--gradient); color:#111; padding:14px 28px; border-radius:999px; font-weight:700; border:none; cursor:pointer; box-shadow:0 12px 36px rgba(255,111,0,0.2); transition: transform 0.2s ease, box-shadow 0.2s ease; display: flex; align-items: center; gap: 8px; font-size: 16px;} .btn-primary:hover {transform: translateY(-3px); box-shadow: 0 16px 40px rgba(255,111,0,0.3);}
        .btn-outline {background:transparent; color:var(--white); padding:14px 24px; border-radius:999px; border:1px solid var(--border); transition: all 0.3s ease; font-weight: 500;} .btn-outline:hover {border-color: var(--accent); color: var(--accent); background: var(--accent-light);}
        .hero-right {width:420px; max-width:42%; min-width:320px; display:flex; align-items:center; justify-content:center; position: relative;}
        .spotlight {width:100%; border-radius:20px; overflow:hidden; background:var(--card); box-shadow:0 20px 60px var(--shadow); border:1px solid var(--border); display:grid; grid-template-columns:120px 1fr; gap:16px; padding:16px; align-items:center; transition: all 0.4s ease; position: relative; z-index: 2;} .spotlight::before {content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; background: var(--gradient); border-radius: 22px; z-index: -1; opacity: 0; transition: opacity 0.3s ease;} .spotlight:hover {transform: translateY(-8px) scale(1.02); box-shadow: 0 30px 80px var(--shadow);} .spotlight:hover::before {opacity: 1;}
        .spotlight .thumb {width:100%; height:100px; border-radius:12px; overflow:hidden; flex:0 0 120px; background:var(--glass); position: relative;} .spotlight .thumb img{width:100%; height:100%; object-fit:cover; display:block; transition: transform 0.5s ease;} .spotlight:hover .thumb img {transform: scale(1.1);}
        .spotlight .meta {padding-right:6px} .spotlight h3{margin:0; font-size:18px; font-weight:700; color:var(--white); line-height: 1.3;} .spotlight p{margin:6px 0 0 0; color:var(--muted); font-size:14px; line-height: 1.4;}
        .rating {margin-top:8px; color:var(--accent); font-weight:800; letter-spacing:.6px; display: flex; align-items: center; gap: 4px;}
        .spotlight .shuffle {margin-top:12px; font-size:12px; color:var(--muted); display:flex; gap:8px; align-items:center;} .dot {width:8px; height:8px; border-radius:50%; background:var(--muted); opacity: 0.3; transition: all 0.3s ease;} .dot.active {background:var(--accent); opacity: 1; transform: scale(1.2);}
        .floating-element {position: absolute; border-radius: 50%; background: var(--gradient); opacity: 0.1; filter: blur(20px); z-index: 1;} .float-1 {width: 200px; height: 200px; top: 10%; right: 5%;} .float-2 {width: 150px; height: 150px; bottom: 20%; left: 5%;}
        .section {padding:80px 48px; position: relative;} .section-header {display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;} .section h2 {font-size:32px; margin:0; color:var(--white); font-weight: 700;} .section-subtitle {color: var(--muted); font-size: 16px; margin-top: 8px; max-width: 600px;}
        .view-all {color: var(--accent); font-weight: 600; display: flex; align-items: center; gap: 6px; transition: all 0.3s ease;} .view-all:hover {gap: 10px;}
        .slider-container {position: relative;} .slider {display:flex; gap:20px; overflow-x:auto; padding:10px 0 30px 0; scroll-snap-type:x mandatory; scrollbar-width: none;} .slider::-webkit-scrollbar { display: none;}
        .card {flex:0 0 280px; min-width:280px; background:var(--card); border-radius:16px; overflow:hidden; scroll-snap-align:start; box-shadow:0 8px 28px var(--shadow); border:1px solid var(--border); cursor:pointer; transition:transform .3s cubic-bezier(.2,.9,.2,1), box-shadow .3s ease; position: relative;} .card::before {content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: var(--gradient); opacity: 0; transition: opacity 0.3s ease; z-index: 1;} .card:hover{transform:translateY(-8px) scale(1.02); box-shadow: 0 20px 50px var(--shadow);} .card:hover::before {opacity: 0.05;}
        .card .imgwrap{height:160px; overflow:hidden; background:var(--glass); position: relative; display: flex; align-items: center; justify-content: center; padding: 20px;} .card .imgwrap img{width:100%; height:100%; object-fit: contain; display:block; transition: transform 0.5s ease; background-color: var(--bg); border-radius: 8px; padding: 10px;} .card:hover .imgwrap img {transform: scale(1.1);}
        .card .body{padding:20px; position: relative; z-index: 2;} .card h3{margin:0 0 8px 0; font-size:18px; color:var(--white); font-weight: 700;} .card p{font-size:14px; color:var(--muted); margin:0 0 12px 0; line-height: 1.5;}
        .card .meta{display:flex; justify-content:space-between; align-items:center;} .card-rating {display: flex; align-items: center; gap: 4px; color: var(--accent); font-weight: 700;} .card-category {font-size: 12px; padding: 4px 10px; background: var(--accent-light); color: var(--accent); border-radius: 20px; font-weight: 600;}
        .category-filters {display: flex; gap: 12px; margin-bottom: 24px; flex-wrap: wrap;} .category-filter {padding: 8px 16px; background: var(--card); border: 1px solid var(--border); border-radius: 20px; color: var(--muted); font-size: 14px; cursor: pointer; transition: all 0.3s ease;} .category-filter.active, .category-filter:hover {background: var(--accent); color: #111; border-color: var(--accent);}
        .features {display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-top: 48px;} .feature-card {background: var(--card); border-radius: 16px; padding: 24px; border: 1px solid var(--border); transition: transform 0.3s ease, box-shadow 0.3s ease;} .feature-card:hover {transform: translateY(-5px); box-shadow: 0 10px 30px var(--shadow);}
        .feature-icon {width: 50px; height: 50px; border-radius: 12px; background: var(--gradient); display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 24px;} .feature-card h3 {margin: 0 0 8px 0; font-size: 18px; color: var(--white);} .feature-card p {margin: 0; color: var(--muted); line-height: 1.5;}
        footer{padding:48px 28px 28px; color:var(--muted); text-align:center; border-top:1px solid var(--border); margin-top:40px; background: var(--card);} .footer-content {max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 32px; text-align: left; margin-bottom: 32px;} .footer-column h3 {color: var(--white); margin-bottom: 16px; font-size: 18px;} .footer-column a {display: block; margin-bottom: 8px; transition: color 0.3s ease;} .footer-column a:hover {color: var(--accent);} .footer-bottom {border-top: 1px solid var(--border); padding-top: 24px; font-size: 14px;}
        @media (max-width:980px){.search{display:none} .hero-inner{flex-direction:column-reverse; gap:30px; align-items:stretch} .hero-right{max-width:100%} .spotlight{grid-template-columns:100px 1fr} .hero { height: auto; min-height: auto; padding: 40px 24px; } .section { padding: 60px 24px; } h1 { font-size: 36px; }}
        @media (max-width:560px){h1{font-size:28px} .btn-primary, .btn-outline{padding:12px 20px; width: 100%; justify-content: center;} .cta-row { flex-direction: column; } .card{min-width:260px; flex:0 0 260px} .spotlight .thumb{height:80px} .nav{padding: 14px 16px;} .hero{padding: 40px 16px;} .section { padding: 40px 16px; } .stats { justify-content: space-around; } .section-header { flex-direction: column; align-items: flex-start; gap: 16px; }}
    </style>
</head>
<body>
    <header class="nav" role="banner">
        <div class="left">
            <img src="images/logo.png" alt="Zo2y logo" class="logo" onclick="location.href='index.html'">
            <div class="search" aria-hidden="false">
                <span class="icon">🔎</span>
                <input id="globalSearch" placeholder="Search restaurants (type and press Enter)" aria-label="Search restaurants">
            </div>
        </div>
        <div class="right">
            <a class="ghost" href="restraunts.html">Explore</a>
            <button class="theme-toggle" id="themeToggle">🌙 Dark Mode</button>
            <button class="account-btn" id="userAccountBtn">
                <i class="fas fa-user"></i>
                <span>Account</span>
            </button>
        </div>
    </header>

    <main>
        <section class="hero" aria-labelledby="heroTitle">
            <div class="hero-bg" aria-hidden="true">
                <div class="hero-bg-pattern"></div>
                <div class="floating-element float-1"></div>
                <div class="floating-element float-2"></div>
            </div>
            <div class="hero-inner">
                <div class="hero-left">
                    <div class="tag">Trusted by Food Lovers</div>
                    <h1 id="heroTitle">Discover Hidden Gems & Local Favorites</h1>
                    <p class="lead">Zo2y connects you with authentic dining experiences. From street food stalls to fine dining, find your next favorite meal based on real reviews from people who know food best.</p>
                    <div class="stats">
                        <div class="stat"><span class="stat-value" id="restaurantCount">18</span><span class="stat-label">Restaurants</span></div>
                        <div class="stat"><span class="stat-value" id="reviewCount">1.4K+</span><span class="stat-label">Reviews</span></div>
                        <div class="stat"><span class="stat-value">4.3</span><span class="stat-label">Avg Rating</span></div>
                    </div>
                    <div class="cta-row">
                        <button class="btn-primary" id="mainCtaBtn"><span>Join the Community</span> →</button>
                        <button class="btn-outline" onclick="location.href='restraunts.html'">Explore Restaurants</button>
                    </div>
                </div>
                <div class="hero-right">
                    <div class="spotlight" id="spotlightCard" role="region" aria-live="polite">
                        <div class="thumb"><img id="spotImg" src="images/mori.png" alt="Featured restaurant"></div>
                        <div class="meta">
                            <div>
                                <h3 id="spotName">Mori Sushi</h3>
                                <p id="spotDesc">Modern sushi chain serving fresh rolls & nigiri.</p>
                                <div class="rating" id="spotRating">⭐ 4.7</div>
                                <div class="shuffle" id="shuffleDots" aria-hidden="true"></div>
                            </div>
                            <div style="align-self:start"><button class="btn-primary" id="spotAction" style="padding:8px 14px; font-size:13px">View Details</button></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div><h2>Featured Restaurants</h2><p class="section-subtitle">Handpicked selections based on quality, authenticity, and user ratings</p></div>
                <a href="restraunts.html" class="view-all">View All <span>→</span></a>
            </div>
            <div class="category-filters">
                <div class="category-filter active" data-category="all">All</div>
                <div class="category-filter" data-category="japanese">Japanese</div>
                <div class="category-filter" data-category="middle-eastern">Middle Eastern</div>
                <div class="category-filter" data-category="mexican">Mexican</div>
                <div class="category-filter" data-category="burgers">Burgers</div>
                <div class="category-filter" data-category="cafe">Cafés</div>
            </div>
            <div class="slider-container"><div id="featuredSlider" class="slider" aria-label="Featured restaurants"></div></div>
        </section>

        <section class="section" style="background: var(--card); margin: 0; border-radius: 0;">
            <div class="section-header"><div><h2>Why Food Lovers Choose Zo2y</h2><p class="section-subtitle">We're more than just ratings - we're a community built around authentic culinary experiences</p></div></div>
            <div class="features">
                <div class="feature-card"><div class="feature-icon">👨‍🍳</div><h3>Local Expertise</h3><p>Our reviews come from people who actually live and dine in these neighborhoods, not tourists or paid reviewers.</p></div>
                <div class="feature-card"><div class="feature-icon">💎</div><h3>Hidden Gems</h3><p>Discover restaurants you won't find on typical review sites - from family-run eateries to underground supper clubs.</p></div>
                <div class="feature-card"><div class="feature-icon">📸</div><h3>Real Photos</h3><p>See actual customer photos, not professional marketing shots. Know exactly what to expect before you visit.</p></div>
            </div>
        </section>

        <section class="section">
            <div class="section-header"><div><h2>Trending This Week</h2><p class="section-subtitle">See what the Zo2y community is buzzing about</p></div></div>
            <div class="slider-container"><div id="trendingSlider" class="slider" aria-label="Trending restaurants"></div></div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-column"><h3>Explore</h3><a href="restraunts.html">All Restaurants</a><a href="top-rated.html">Top Rated</a><a href="categories.html">By Category</a><a href="neighborhoods.html">By Neighborhood</a></div>
            <div class="footer-column"><h3>Community</h3><a href="blog.html">Food Blog</a><a href="events.html">Food Events</a><a href="guides.html">Neighborhood Guides</a><a href="stories.html">User Stories</a></div>
            <div class="footer-column"><h3>Business</h3><a href="add-restaurant.html">Add Your Restaurant</a><a href="advertise.html">Advertise</a><a href="partners.html">Partnerships</a></div>
            <div class="footer-column"><h3>Support</h3><a href="about.html">About Zo2y</a><a href="contact.html">Contact Us</a><a href="help.html">Help Center</a><a href="terms.html">Terms & Privacy</a></div>
        </div>
        <div class="footer-bottom">
            <div style="margin-bottom:8px">© 2025 Zo2y — Built with ❤️ for food lovers</div>
            <div style="font-size:13px; color:var(--muted)">Join thousands of food enthusiasts discovering authentic dining experiences</div>
        </div>
    </footer>

    <script>
        // ===== SUPABASE AUTHENTICATION =====
        async function checkAuthStatus() {
            try {
                const { data: { session }, error } = await supabase.auth.getSession()
                return !!session
            } catch (error) {
                console.error('Auth check failed:', error)
                return false
            }
        }

        async function getCurrentUser() {
            try {
                const { data: { user }, error } = await supabase.auth.getUser()
                if (user) {
                    const { data: profile } = await supabase.from('user_profiles').select('*').eq('id', user.id).single()
                    return { id: user.id, email: user.email, username: user.user_metadata?.username, profile: profile }
                }
                return null
            } catch (error) {
                console.error('Get user failed:', error)
                return null
            }
        }

        async function updateAuthUI() {
            const accountBtn = document.getElementById('userAccountBtn')
            const mainCtaBtn = document.getElementById('mainCtaBtn')
            const heroTitle = document.getElementById('heroTitle')
            
            const isLoggedIn = await checkAuthStatus()
            if (isLoggedIn) {
                const user = await getCurrentUser()
                const displayName = user?.profile?.display_name || user?.username || user?.email || 'User'
                accountBtn.innerHTML = `<i class="fas fa-user"></i> ${displayName}`
                accountBtn.onclick = () => location.href = 'profile.html'
                mainCtaBtn.innerHTML = `<span>Continue Exploring</span> →`
                mainCtaBtn.onclick = () => location.href = 'restraunts.html'
                heroTitle.textContent = `Welcome back, ${displayName}!`
            } else {
                accountBtn.innerHTML = `<i class="fas fa-user"></i> Account`
                accountBtn.onclick = () => location.href = 'login.html'
                mainCtaBtn.innerHTML = `<span>Join the Community</span> →`
                mainCtaBtn.onclick = () => location.href = 'login.html'
                heroTitle.textContent = `Discover Hidden Gems & Local Favorites`
            }
        }

        // ===== DARK MODE =====
        const themeToggle = document.getElementById('themeToggle')
        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme)
            themeToggle.textContent = theme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode'
            localStorage.setItem('zo2y-theme', theme)
        }
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light'
            applyTheme(currentTheme === 'light' ? 'dark' : 'light')
        }
        function initializeTheme() {
            const savedTheme = localStorage.getItem('zo2y-theme')
            applyTheme(savedTheme || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'))
        }
        themeToggle.addEventListener('click', toggleTheme)

        // ===== RESTAURANT DATA =====
        const restaurants = [
            { slug:'mori', name:'Mori Sushi', category:'Japanese', desc:'Modern sushi chain serving fresh rolls & nigiri.', rating:4.7, reviews: 1, image: 'mori.png', link: 'cards/mori.html', tags: ['japanese', 'sushi'] },
            { slug:'kilo', name:'Kilo Kebab', category:'Middle Eastern', desc:'Charcoal-grilled kebabs & hearty Middle Eastern plates.', rating:4.5, reviews: 1, image: 'kilo.png', link: 'cards/kilo.html', tags: ['middle-eastern', 'kebab'] },
            { slug:'hameed', name:'Hameed', category:'Fast Food', desc:'Local favorite for sandwiches & quick bites.', rating:4.3, reviews: 1, image: 'hameed.png', link: 'cards/hameed.html', tags: ['middle-eastern', 'fast-food'] },
            { slug:'bazooka', name:'Bazooka', category:'Burger & Fried Chicken', desc:'Loaded burgers & crispy fried chicken combos.', rating:4.2, reviews: 1, image: 'bazooka.jpg', link: 'cards/bazooka.html', tags: ['burgers', 'fried-chicken'] },
            { slug:'mexican', name:'Mexican Corn', category:'Mexican', desc:'Elote, tacos & cheesy Mexican street snacks.', rating:4.0, reviews: 1, image: 'mexican.jpg', link: 'cards/mexican.html', tags: ['mexican', 'street-food'] },
            { slug:'akleh', name:'Akleh', category:'Middle Eastern', desc:'Authentic Middle Eastern cuisine with a modern twist.', rating:4.6, reviews: 1, image: 'akleh.jpg', link: 'cards/akleh.html', tags: ['middle-eastern'] },
            { slug:'barbar', name:'Barbar', category:'Lebanese', desc:'Traditional Lebanese dishes in a cozy atmosphere.', rating:4.4, reviews: 1, image: 'barbar.png', link: 'cards/barbar.html', tags: ['middle-eastern', 'lebanese'] },
            { slug:'bayoki', name:'Bayoki', category:'Middle Eastern', desc:'Fusion of Middle Eastern flavors with international cuisine.', rating:4.3, reviews: 1, image: 'bayoki.png', link: 'cards/bayoki.html', tags: ['middle-eastern'] },
            { slug:'brgr', name:'BRGR', category:'Burgers', desc:'Gourmet burgers with creative toppings and sides.', rating:4.5, reviews: 1, image: 'brgr.jpg', link: 'cards/brgr.html', tags: ['burgers'] },
            { slug:'chikin', name:'Chikin', category:'Fried Chicken', desc:'Crispy fried chicken with a variety of sauces and sides.', rating:4.2, reviews: 1, image: 'chikin.png', link: 'cards/chikin.html', tags: ['fried-chicken'] },
            { slug:'country', name:'Country', category:'American', desc:'Classic American comfort food in a rustic setting.', rating:4.1, reviews: 1, image: 'country.jpg', link: 'cards/country.html', tags: ['american'] },
            { slug:'howlin', name:'Howlin', category:'Burgers', desc:'Bold flavors and creative burger combinations.', rating:4.4, reviews: 1, image: 'howlin.png', link: 'cards/howlin.html', tags: ['burgers'] },
            { slug:'labash', name:'Labash', category:'Middle Eastern', desc:'Traditional Middle Eastern street food with modern flair.', rating:4.3, reviews: 1, image: 'labash.jpg', link: 'cards/labash.html', tags: ['middle-eastern', 'street-food'] },
            { slug:'maine', name:'Maine', category:'Seafood', desc:'Fresh seafood dishes inspired by coastal cuisine.', rating:4.6, reviews: 1, image: 'maine.jpg', link: 'cards/maine.html', tags: ['seafood'] },
            { slug:'pickl', name:'Pickl', category:'Sandwiches', desc:'Specialty sandwiches with house-made pickles and sauces.', rating:4.2, reviews: 1, image: 'pickl.jpg', link: 'cards/pickl.html', tags: ['sandwiches'] },
            { slug:'sauce', name:'Sauce', category:'International', desc:'Global cuisine with signature sauces and flavors.', rating:4.3, reviews: 1, image: 'sauce.jpg', link: 'cards/sauce.html', tags: ['international'] },
            { slug:'secondcup', name:'Second Cup', category:'Coffee Shop', desc:'Premium coffee, teas, and light snacks in a cozy setting.', rating:4.4, reviews: 1, image: 'secondcup.png', link: 'cards/secondcup.html', tags: ['cafe', 'coffee'] },
            { slug:'vasko', name:'Vasko', category:'Cafe', desc:'Artisanal coffee and pastries in a modern European-style cafe.', rating:4.5, reviews: 1, image: 'vasko.jpg', link: 'cards/vasko.html', tags: ['cafe', 'coffee'] }
        ];

        // ===== PAGE FUNCTIONALITY =====
        function calculateStats() {
            const restaurantCount = restaurants.length
            const totalReviews = restaurants.reduce((sum, r) => sum + r.reviews, 0)
            const avgRating = (restaurants.reduce((sum, r) => sum + r.rating, 0) / restaurantCount).toFixed(1)
            document.getElementById('restaurantCount').textContent = restaurantCount
            document.getElementById('reviewCount').textContent = totalReviews
            document.querySelector('.stat-value:last-child').textContent = avgRating
        }

        function makeCard(r){
            const el = document.createElement('a')
            el.className = 'card'
            el.href = r.link
            el.setAttribute('data-categories', r.tags.join(' '))
            
            const imgwrap = document.createElement('div')
            imgwrap.className = 'imgwrap'
            const img = document.createElement('img')
            img.src = `images/${r.image}`
            img.alt = r.name
            img.loading = 'lazy'
            imgwrap.appendChild(img)

            const body = document.createElement('div')
            body.className = 'body'
            const h3 = document.createElement('h3')
            h3.textContent = r.name
            const p = document.createElement('p')
            p.textContent = r.desc
            const meta = document.createElement('div')
            meta.className = 'meta'
            
            const rating = document.createElement('div')
            rating.className = 'card-rating'
            rating.innerHTML = `⭐ ${r.rating}`
            
            const category = document.createElement('div')
            category.className = 'card-category'
            category.textContent = r.category
            
            meta.appendChild(rating)
            meta.appendChild(category)
            
            body.appendChild(h3)
            body.appendChild(p)
            body.appendChild(meta)
            el.appendChild(imgwrap)
            el.appendChild(body)
            return el
        }

        let currentSpotlightIndex = 0
        function renderSpotlight(index){
            const r = restaurants[index]
            document.getElementById('spotImg').src = `images/${r.image}`
            document.getElementById('spotImg').alt = r.name
            document.getElementById('spotName').textContent = r.name
            document.getElementById('spotDesc').textContent = r.desc
            document.getElementById('spotRating').textContent = `⭐ ${r.rating}`
            document.getElementById('spotAction').onclick = () => location.href = r.link
            
            // Update shuffle dots
            const shuffleDots = document.getElementById('shuffleDots')
            shuffleDots.innerHTML = ''
            for (let i = 0; i < 5; i++) {
                const dot = document.createElement('div')
                dot.className = 'dot' + (i === (index % 5) ? ' active' : '')
                shuffleDots.appendChild(dot)
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeTheme()
            updateAuthUI()
            calculateStats()
            
            // Populate featured slider with ALL restaurants
            const featuredSlider = document.getElementById('featuredSlider')
            restaurants.forEach(r => {
                featuredSlider.appendChild(makeCard(r))
            })
            
            // Populate trending slider with high-rated restaurants
            const trendingSlider = document.getElementById('trendingSlider')
            const trendingRestaurants = restaurants.filter(r => r.rating >= 4.5)
            trendingRestaurants.forEach(r => {
                trendingSlider.appendChild(makeCard(r))
            })
            
            // Initialize spotlight
            renderSpotlight(0)
            setInterval(() => {
                currentSpotlightIndex = (currentSpotlightIndex + 1) % restaurants.length
                renderSpotlight(currentSpotlightIndex)
            }, 4000)

            // Category filters
            document.querySelectorAll('.category-filter').forEach(filter => {
                filter.addEventListener('click', function() {
                    document.querySelectorAll('.category-filter').forEach(f => f.classList.remove('active'))
                    this.classList.add('active')
                    const category = this.getAttribute('data-category')
                    const cards = document.querySelectorAll('.card')
                    
                    cards.forEach(card => {
                        if (category === 'all' || card.getAttribute('data-categories').includes(category)) {
                            card.style.display = 'block'
                        } else {
                            card.style.display = 'none'
                        }
                    })
                })
            })

            // Search functionality
            document.getElementById('globalSearch').addEventListener('keydown', (e) => {
                if(e.key === 'Enter'){
                    const q = e.target.value.trim()
                    const url = q ? `restraunts.html?q=${encodeURIComponent(q)}` : 'restraunts.html'
                    location.href = url
                }
            })

            // Nav scroll effect
            window.addEventListener('scroll', function() {
                const nav = document.querySelector('.nav')
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled')
                } else {
                    nav.classList.remove('scrolled')
                }
            })
        })
    </script>
</body>
</html>