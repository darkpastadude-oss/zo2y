<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Zo2y ‚Äî Discover Local Favorites</title>

    <link rel="icon" href="/favicon.ico?v=3" type="image/x-icon">
    <link rel="shortcut icon" href="/favicon.ico?v=3" type="image/x-icon">
    
    <meta name="description" content="Discover hidden gems and local favorite restaurants based on authentic reviews from the food lover community.">
    <meta property="og:title" content="Zo2y ‚Äî Discover Local Favorites">
    <meta property="og:image" content="https://www.zo2y.com/images/logo.png">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --bg: #0b1633; --card: #132347; --muted: #8ca3c7; --accent: #f59e0b; 
            --glass: rgba(255,255,255,0.03); --white: #ffffff; --border: rgba(255,255,255,0.1);
            --gradient: linear-gradient(135deg, #f59e0b 0%, #ffb84d 100%);
            --shadow: 0 10px 30px rgba(0,0,0,0.3);
            --success: #10b981; --error: #ef4444; --info: #3b82f6;
            --surface: rgba(19, 35, 71, 0.6);
            --cloud-color: #3b82f6;
            --radial-glow: radial-gradient(circle at 50% 0%, rgba(245, 158, 11, 0.15) 0%, transparent 70%);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--white); line-height: 1.6; overflow-x: hidden; }
        a { color: inherit; text-decoration: none; }
        img { display: block; max-width: 100%; height: auto; }
        
        /* Guest Banner */
        .guest-banner {
            display: none;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(255, 184, 77, 0.1) 100%);
            border: 1px solid rgba(245, 158, 11, 0.2);
            padding: 12px 20px;
            margin: 0 auto 20px auto;
            border-radius: 12px;
            max-width: 1200px;
            width: calc(100% - 32px);
            text-align: center;
            animation: slideDown 0.3s ease-out;
        }
        .guest-banner.show { display: block; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        .banner-content { display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 8px; color: var(--muted); font-size: 14px; }
        .banner-actions { display: flex; gap: 8px; align-items: center; }
        .banner-btn { padding: 6px 14px; border-radius: 8px; font-weight: 500; font-size: 13px; cursor: pointer; transition: all 0.3s ease; border: none; }
        .banner-btn-outline { background: transparent; color: var(--accent); border: 1px solid var(--accent); }
        .banner-btn-outline:hover { background: rgba(245, 158, 11, 0.1); }
        .banner-btn-primary { background: var(--accent); color: #111; border: 1px solid var(--accent); }
        .banner-btn-primary:hover { background: #ffb84d; transform: translateY(-1px); }
        
        /* Navigation */
        .nav { position: sticky; top: 0; z-index: 1000; padding: 14px 16px; backdrop-filter: blur(10px) saturate(180%); background: var(--surface); border-bottom: 1px solid var(--border); transition: all 0.3s ease; }
        .nav.scrolled { background: rgba(19, 35, 71, 0.95); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); }
        .nav-container { display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; width: 100%; max-width: 1200px; margin: 0 auto; gap: 12px; }
        
        .logo { height: 40px; width: auto; cursor: pointer; transition: all 0.3s ease; flex-shrink: 0; order: 1; }
        .logo:hover { transform: scale(1.05); }
        
        .search-wrapper { width: 100%; max-width: 500px; position: relative; margin: 0 24px; order: 2; flex: 1; }
        .search { width: 100%; padding: 10px 16px 10px 40px; border-radius: 20px; border: 1px solid var(--border); background: var(--card); color: var(--white); outline: none; font-size: 14px; transition: all 0.3s ease; }
        .search:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1); }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: 0.6; pointer-events: none; }
        
        .nav-right { display: flex; align-items: center; gap: 12px; flex-shrink: 0; order: 3; }
        .account-btn { background: transparent; color: var(--white); padding: 8px 16px; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; font-size: 14px; white-space: nowrap; }
        .account-btn:hover { background: rgba(245, 158, 11, 0.1); border-color: var(--accent); }
        .nav a.ghost { color: var(--muted); padding: 8px 14px; border-radius: 12px; font-size: 14px; font-weight: 500; transition: all 0.3s ease; white-space: nowrap; }
        .nav a.ghost:hover { color: var(--accent); background: rgba(245, 158, 11, 0.05); }

        /* Responsive Nav */
        @media (max-width: 768px) {
            .search-wrapper { order: 4; width: 100%; margin: 8px 0 0 0; }
            .nav-right { margin-left: auto; }
            .ghost { display: none; }
        }

        /* Hero */
        .hero { position: relative; min-height: 80vh; display: flex; align-items: center; justify-content: center; padding: 60px 16px; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: var(--radial-glow); pointer-events: none; z-index: 1; }
        .hero-container { position: relative; z-index: 6; display: flex; align-items: center; gap: 60px; width: 100%; max-width: 1200px; margin: 0 auto; }
        
        @media (max-width: 992px) { .hero-container { flex-direction: column-reverse; gap: 40px; text-align: center; } }
        
        .hero-left { flex: 1; min-width: 0; }
        .tag { display: inline-flex; align-items: center; gap: 8px; color: var(--accent); font-weight: 600; font-size: 13px; padding: 6px 12px; border-radius: 999px; margin-bottom: 16px; border: 1px solid rgba(245, 158, 11, 0.2); background: rgba(245, 158, 11, 0.05); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        h1 { font-size: clamp(2rem, 6vw, 3.5rem); line-height: 1.1; margin: 0 0 20px 0; font-weight: 900; letter-spacing: -1px; color: var(--white); background: linear-gradient(135deg, #ffffff 0%, #f59e0b 50%, #ffb84d 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .lead { color: var(--muted); font-size: clamp(1rem, 2vw, 1.2rem); margin-bottom: 32px; max-width: 500px; line-height: 1.6; font-weight: 400; }
        
        .cta-row { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; }
        .btn-primary { background: var(--gradient); color: #0b1633; padding: 14px 28px; border-radius: 12px; font-weight: 700; border: none; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 15px; transition: all 0.3s ease; box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3); }
        .btn-primary:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 12px 35px rgba(245, 158, 11, 0.4); }
        .btn-outline { background: transparent; color: var(--white); padding: 14px 28px; border-radius: 12px; border: 1px solid var(--border); font-weight: 500; transition: all 0.3s ease; font-size: 15px; }
        .btn-outline:hover { border-color: var(--accent); background: rgba(245, 158, 11, 0.05); transform: translateY(-2px); }

        /* Spotlight */
        .hero-right { width: 100%; max-width: 500px; min-width: 0; display: flex; align-items: center; justify-content: center; position: relative; }
        .spotlight-wrapper { width: 100%; position: relative; }
        .spotlight { width: 100%; border-radius: 24px; overflow: hidden; background: var(--card); box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4); border: 2px solid var(--border); display: flex; flex-direction: column; align-items: center; position: relative; z-index: 2; transition: all 0.3s ease; cursor: pointer; height: 380px; }
        .spotlight:hover { transform: translateY(-8px); border-color: var(--accent); box-shadow: 0 30px 60px rgba(245, 158, 11, 0.25); }
        .spotlight-img-container { width: 100%; height: 240px; overflow: hidden; background: linear-gradient(135deg, #1a2d5f 0%, #0b1633 100%); position: relative; }
        .spotlight-food-image { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 0.5s ease; opacity: 0; }
        .spotlight-food-image.loaded { opacity: 1; }
        .spotlight:hover .spotlight-food-image { transform: scale(1.05); }
        .spotlight-logo-overlay { position: absolute; bottom: 12px; left: 12px; width: 48px; height: 48px; background: rgba(11, 22, 51, 0.9); border-radius: 12px; display: flex; align-items: center; justify-content: center; padding: 4px; border: 2px solid var(--accent); backdrop-filter: blur(10px); z-index: 10; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4); }
        .spotlight-logo-overlay img { width: 100%; height: 100%; object-fit: contain; opacity: 0; transition: opacity 0.5s ease; }
        .spotlight-logo-overlay img.loaded { opacity: 1; }
        .spotlight-content { padding: 20px; flex: 1; width: 100%; display: flex; flex-direction: column; justify-content: space-between; }
        .spotlight h3 { margin: 0 0 8px 0; font-size: 20px; font-weight: 700; color: var(--white); line-height: 1.3; }
        .spotlight p { margin: 0 0 12px 0; color: var(--muted); font-size: 14px; line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .spotlight .rating { color: var(--accent); font-weight: 600; display: flex; align-items: center; gap: 6px; font-size: 14px; }
        .slide-indicators { display: flex; justify-content: center; gap: 8px; margin-top: 20px; }
        .slide-indicator { width: 10px; height: 10px; border-radius: 50%; background: var(--border); cursor: pointer; transition: all 0.3s ease; }
        .slide-indicator.active { background: var(--accent); transform: scale(1.2); }

        /* General Sections */
        .section { padding: 60px 16px; position: relative; max-width: 1200px; margin: 0 auto; }
        .section-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 30px; flex-wrap: wrap; gap: 16px; }
        .section h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); margin: 0; color: var(--white); font-weight: 800; letter-spacing: -0.5px; }
        .section-subtitle { color: var(--muted); font-size: 16px; margin-top: 8px; max-width: 500px; line-height: 1.5; }
        .view-all { color: var(--accent); font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; font-size: 15px; padding: 8px 16px; border-radius: 12px; border: 1px solid transparent; }
        .view-all:hover { gap: 12px; background: rgba(245, 158, 11, 0.05); border-color: rgba(245, 158, 11, 0.2); }

        /* Filter Bar */
        .filter-bar { display: flex; justify-content: center; gap: 8px; margin-bottom: 24px; overflow-x: auto; padding: 4px 0 12px 0; scrollbar-width: none; }
        .filter-bar::-webkit-scrollbar { display: none; }
        .filter-btn { padding: 10px 20px; background: var(--card); border: 1px solid var(--border); border-radius: 12px; color: var(--muted); font-size: 14px; cursor: pointer; transition: all 0.3s ease; white-space: nowrap; flex-shrink: 0; }
        .filter-btn.active, .filter-btn:hover { background: var(--accent); color: #111; border-color: var(--accent); transform: translateY(-2px); }

        /* Slider Grid */
        .slider-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        @media (max-width: 768px) {
            .slider-grid { display: flex; grid-template-columns: none; gap: 16px; overflow-x: auto; padding: 8px 0 20px 0; scroll-snap-type: x mandatory; margin: 0 -16px; padding-left: 16px; scrollbar-width: none; }
            .slider-grid::-webkit-scrollbar { display: none; }
            .restaurant-card { width: 280px; flex-shrink: 0; scroll-snap-align: start; }
        }
        @media (min-width: 769px) { .slider-grid { grid-template-columns: repeat(4, 1fr); } }

        /* Restaurant Card */
        .restaurant-card { background: var(--card); border-radius: 16px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid var(--border); cursor: pointer; position: relative; transition: all 0.2s ease; display: flex; flex-direction: column; height: 100%; flex-shrink: 0; }
        .restaurant-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.2); border-color: var(--accent); }
        .card-image { height: 200px; position: relative; overflow: hidden; background: linear-gradient(135deg, #1a2d5f 0%, #0b1633 100%); }
        .restaurant-image { width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.5s ease; }
        .restaurant-image.loaded { opacity: 1; }
        
        .list-badges-container { position: absolute; top: 12px; left: 12px; display: flex; gap: 6px; z-index: 30; flex-direction: column; }
        .list-badge { background: rgba(11, 22, 51, 0.95); color: var(--accent); padding: 8px 10px; border-radius: 8px; font-size: 18px; border: 1px solid var(--accent); display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; }
        
        .logo-overlay { position: absolute; bottom: 12px; left: 12px; width: 48px; height: 48px; background: rgba(11, 22, 51, 0.9); border-radius: 12px; display: flex; align-items: center; justify-content: center; padding: 4px; border: 2px solid var(--accent); z-index: 20; box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
        .logo-overlay img { width: 100%; height: 100%; object-fit: contain; }

        .card-content { padding: 16px; flex: 1; display: flex; flex-direction: column; }
        .card-header { margin-bottom: 8px; display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; }
        .card-title { font-size: 16px; font-weight: 700; margin: 0; flex: 1; }
        .card-rating { padding: 3px 6px; font-size: 11px; font-weight: 600; border-radius: 6px; background: rgba(245, 158, 11, 0.15); color: var(--accent); border: 1px solid rgba(245, 158, 11, 0.3); display: flex; align-items: center; gap: 4px; }
        .card-category { color: var(--accent); font-size: 13px; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .card-description { color: var(--muted); font-size: 14px; line-height: 1.5; margin: 0 0 16px 0; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .card-footer { margin-top: auto; padding-top: 12px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
        .card-location { color: var(--muted); font-size: 13px; font-weight: 500; }

        /* Skeleton Loading */
        .skeleton-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .skeleton-card { background: var(--card); border-radius: 16px; overflow: hidden; border: 1px solid var(--border); height: 350px; }
        .skeleton-image { height: 200px; background: linear-gradient(90deg, var(--card) 25%, rgba(255,255,255,0.05) 50%, var(--card) 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
        .skeleton-content { padding: 16px; }
        .skeleton-line { height: 12px; background: linear-gradient(90deg, var(--card) 25%, rgba(255,255,255,0.05) 50%, var(--card) 75%); background-size: 200% 100%; animation: loading 1.5s infinite; margin-bottom: 8px; border-radius: 4px; }
        .skeleton-line.short { width: 60%; }
        @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        /* Restaurant of Day */
        .restaurant-of-day { position: relative; background: linear-gradient(135deg, rgba(19, 35, 71, 0.8) 0%, rgba(11, 22, 51, 0.9) 100%); border-radius: 24px; padding: 60px 20px; margin: 60px 0; text-align: center; border: 1px solid rgba(245, 158, 11, 0.2); box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4); overflow: hidden; }
        .day-header h2 { font-size: 3rem; font-weight: 900; background: linear-gradient(135deg, #ffffff 0%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .day-card-container { display: flex; justify-content: center; position: relative; z-index: 2; margin-top: 40px; }
        .day-card { background: rgba(11, 22, 51, 0.7); border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 2px solid rgba(245, 158, 11, 0.3); width: 100%; max-width: 800px; backdrop-filter: blur(10px); }
        
        /* Footer */
        footer { padding: 60px 20px 30px; border-top: 1px solid var(--border); margin-top: 60px; background: var(--card); text-align: center; color: var(--muted); }
        .footer-content { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; text-align: left; margin-bottom: 40px; }
        .footer-column h3 { color: var(--white); margin-bottom: 20px; font-size: 16px; font-weight: 600; }
        .footer-column a { display: block; margin-bottom: 12px; font-size: 14px; transition: all 0.3s ease; }
        .footer-column a:hover { color: var(--accent); transform: translateX(5px); }
        
        /* Notifications */
        .notification-container { position: fixed; top: 20px; right: 16px; z-index: 2000; display: flex; flex-direction: column; gap: 8px; }
        .custom-notification { padding: 16px 20px; border-radius: 12px; background: var(--card); border: 1px solid var(--border); box-shadow: 0 10px 30px rgba(0,0,0,0.3); transform: translateX(120%); transition: transform 0.4s ease; display: flex; align-items: center; gap: 12px; }
        .notification-show { transform: translateX(0); }
    </style>
</head>
<body>
    <div id="guestBanner" class="guest-banner">
        <div class="banner-content">
            <span class="banner-text">Want to save your favorite restaurants?</span>
            <div class="banner-actions">
                <button class="banner-btn banner-btn-outline" id="bannerLoginBtn">Sign In</button>
                <button class="banner-btn banner-btn-primary" id="bannerSignupBtn">Create Account</button>
            </div>
        </div>
    </div>

    <header class="nav">
        <div class="nav-container">
            <img src="images/logo.png" alt="Zo2y" class="logo" onclick="location.href='index.html'">
            
            <button class="mobile-search-toggle" id="mobileSearchToggle" style="display:none;"><i class="fas fa-search"></i></button>
            
            <div class="search-wrapper" id="searchWrapper">
                <div class="search-container">
                    <span class="search-icon">üîé</span>
                    <input type="text" id="search" class="search" placeholder="Search restaurants...">
                </div>
            </div>
            
            <div class="nav-right">
                <a class="ghost" href="restraunts.html">Explore All</a>
                <button class="account-btn" id="userAccountBtn"><i class="fas fa-user"></i><span>Account</span></button>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-container">
            <div class="hero-left">
                <div class="tag">Trusted by Food Lovers</div>
                <h1>Discover Hidden Gems & Local Favorites</h1>
                <p class="lead">Find authentic dining experiences based on real reviews from the food lover community.</p>
                <div class="cta-row">
                    <button class="btn-primary logged-out" onclick="location.href='sign-up.html'">
                        <i class="fas fa-map-signs"></i> Start Your Food Journey
                    </button>
                    <button class="btn-primary logged-in" onclick="location.href='restraunts.html'" style="display: none;">
                        <i class="fas fa-utensils"></i> Explore All Restaurants
                    </button>
                </div>
            </div>
            <div class="hero-right">
                <div class="spotlight-wrapper">
                    <div class="spotlight" id="spotlightCard">
                        <div class="spotlight-img-container">
                            <img id="spotFoodImage" class="spotlight-food-image" src="" alt="Featured restaurant">
                            <div class="spotlight-logo-overlay" id="spotLogoOverlay">
                                <img id="spotLogo" src="" alt="Logo">
                            </div>
                        </div>
                        <div class="spotlight-content">
                            <div class="spotlight-text">
                                <h3 id="spotName">Loading...</h3>
                                <p id="spotDesc">...</p>
                                <div class="rating" id="spotRating">‚≠ê ...</div>
                            </div>
                            <button class="btn-outline" style="padding:8px 16px; font-size:13px">View Details</button>
                        </div>
                    </div>
                    <div class="slide-indicators" id="slideIndicators"></div>
                </div>
            </div>
        </div>
    </section>

    <main>
        <section class="section">
            <div class="section-header">
                <div>
                    <h2>Featured Restaurants</h2>
                    <p class="section-subtitle">Handpicked selections based on quality</p>
                </div>
                <a href="restraunts.html" class="view-all">View All <span>‚Üí</span></a>
            </div>
            
            <div class="filter-bar" id="filterBar"></div>
            
            <div class="slider-container">
                <div id="featuredSlider" class="slider-grid skeleton-grid">
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                <div>
                    <h2>Nearby Restaurants</h2>
                    <p class="section-subtitle">Great food close to you</p>
                </div>
            </div>
            <div class="slider-container">
                <div id="nearbySlider" class="slider-grid skeleton-grid">
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                    <div class="skeleton-card"><div class="skeleton-image"></div><div class="skeleton-content"><div class="skeleton-line" style="width: 70%"></div><div class="skeleton-line short"></div></div></div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="restaurant-of-day">
                <div class="day-header">
                    <h2>Restaurant of the Day</h2>
                    <p>Our specially selected restaurant that stands out from the rest.</p>
                </div>
                <div class="day-card-container">
                    <div id="dayCard" class="day-card">
                        </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>Explore</h3>
                <a href="restraunts.html">All Restaurants</a>
            </div>
            <div class="footer-column">
                <h3>Community</h3>
                <a href="#">Food Blog</a>
            </div>
            <div class="footer-column">
                <h3>Business</h3>
                <a href="#">Add Your Restaurant</a>
            </div>
            <div class="footer-column">
                <h3>Support</h3>
                <a href="#">Help Center</a>
            </div>
        </div>
        <div style="font-size:12px">¬© 2025 Zo2y ‚Äî Built with ‚ù§Ô∏è for food lovers</div>
    </footer>

    <div id="notificationContainer" class="notification-container"></div>

    <script>
        (function() {
            'use strict';
            
            // ---------- CONFIG ----------
            const SUPABASE_URL = 'https://gfkhjbztayjyojsgdpgk.supabase.co';
            const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdma2hqYnp0YXlqeW9qc2dkcGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTYyNjQsImV4cCI6MjA3NTY3MjI2NH0.WUb2yDAwCeokdpWCPeH13FE8NhWF6G8e6ivTsgu6b2s';
            
            // Initialize Supabase
            const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
            let currentUser = null;
            
            // ---------- GLOBAL STATE ----------
            const state = {
                restaurants: [],
                categories: new Map(),
                cloudKitchens: new Set(),
                isLoggedIn: false,
                restaurantImages: new Map(),
                spotlightIndex: 0,
                spotlightRestaurants: [],
                spotlightInterval: null,
                imageObserver: null
            };

            // ---------- CLOUD KITCHEN MANAGER ----------
            const cloudKitchenManager = {
                async loadCloudKitchens() {
                    try {
                        const { data, error } = await supabase.from('cloud_kitchens').select('restaurant_id');
                        if (!error && data) {
                            state.cloudKitchens.clear();
                            data.forEach(ck => state.cloudKitchens.add(ck.restaurant_id));
                        }
                    } catch (e) { console.error('Cloud kitchen error', e); }
                },
                isCloudKitchen(id) { return state.cloudKitchens.has(id); },
                createCloudBadge(id) {
                    if (!this.isCloudKitchen(id)) return '';
                    return `<div class="cloud-badge" aria-label="Cloud Kitchen"><i class="fas fa-cloud"></i></div>`;
                }
            };

            // ---------- LIST MANAGER ----------
            const listManager = {
                userLists: [],
                currentLists: { favorites: null, visited: null, wantToGo: null },
                
                async init() {
                    if (!state.isLoggedIn || !currentUser) return;
                    try {
                        const { data: lists } = await supabase.from('lists').select('*').eq('user_id', currentUser.id);
                        this.userLists = lists || [];
                        await this.setupDefaultLists();
                        await this.loadListRestaurants();
                    } catch (e) { console.error('List init error', e); }
                },
                
                async setupDefaultLists() {
                    // Logic to find or create default lists
                    this.currentLists.favorites = this.userLists.find(l => l.title === 'Favorites');
                    if (!this.currentLists.favorites) await this.createList('Favorites', 'My favorites');
                },

                async createList(title, desc) {
                    const { data } = await supabase.from('lists').insert([{ user_id: currentUser.id, title, description: desc }]).select().single();
                    if(data) this.userLists.push(data);
                    return data;
                },

                async loadListRestaurants() {
                    // Simplified for brevity - loads restaurant IDs for each list
                    for (const list of this.userLists) {
                        const { data } = await supabase.from('lists_restraunts').select('restraunt_id').eq('list_id', list.id);
                        list.restaurants = data ? data.map(i => i.restraunt_id) : [];
                    }
                },

                getRestaurantListStatus(restaurantId) {
                    if (!state.isLoggedIn) return { favorites: false };
                    const favList = this.userLists.find(l => l.title === 'Favorites');
                    return { favorites: favList?.restaurants?.includes(restaurantId) || false };
                }
            };

            // ---------- INITIALIZATION SEQUENCE ----------
            async function init() {
                console.log('üöÄ Initializing homepage...');
                
                initImageLoader();
                
                // 1. Load Data FIRST so the user sees content immediately
                await loadRestaurantsData();
                
                // 2. Then check Auth (Updates UI with hearts if logged in)
                await initializeAuth();
            }

            // ---------- DATA LOADING ----------
            async function loadRestaurantsData() {
                try {
                    await cloudKitchenManager.loadCloudKitchens();
                    await loadRestaurantImages();
                    
                    // Robust Query with Fallback
                    let data = [];
                    const { data: complexData, error } = await supabase
                        .from('restraunts')
                        .select(`id, slug, name, category, description, rating, logo_url, image, categories!inner(name, icon)`)
                        .order('rating', { ascending: false })
                        .limit(48);

                    if (error || !complexData) {
                        console.warn('Using fallback query');
                        const { data: basicData } = await supabase.from('restraunts').select('*').order('rating', { ascending: false }).limit(48);
                        data = basicData || [];
                    } else {
                        data = complexData;
                    }

                    if (data.length === 0) {
                        document.getElementById('featuredSlider').innerHTML = '<div class="empty-state">No restaurants found</div>';
                        return;
                    }

                    state.restaurants = data.map(r => ({
                        id: r.id,
                        slug: r.slug,
                        name: r.name,
                        category: r.categories ? r.categories.name : r.category || 'Restaurant',
                        description: r.description,
                        rating: r.rating,
                        logo_url: getLogoUrl(r),
                        coverImage: getCoverImageUrl(r.slug) || r.image,
                        isCloudKitchen: cloudKitchenManager.isCloudKitchen(r.id)
                    }));

                    // Render Data immediately
                    renderFeaturedRestaurants();
                    renderNearbyRestaurants();
                    setupSpotlight();
                    setupRestaurantOfTheDay();
                    populateFilters();

                } catch (error) {
                    console.error('Error loading restaurants:', error);
                }
            }

            async function loadRestaurantImages() {
                const { data } = await supabase.from('restaurant_gallery').select('*').eq('image_type', 'cover');
                if(data) {
                    data.forEach(img => {
                        if(!state.restaurantImages.has(img.restaurant_slug)) {
                            state.restaurantImages.set(img.restaurant_slug, { cover: img.image_url });
                        }
                    });
                }
            }

            function getCoverImageUrl(slug) {
                return state.restaurantImages.get(slug)?.cover || null;
            }

            function getLogoUrl(r) {
                return r.logo_url || r.image; // Fallback
            }

            // ---------- RENDERING ----------
            function renderFeaturedRestaurants() {
                const grid = document.getElementById('featuredSlider');
                if(!grid || state.restaurants.length === 0) return;
                
                grid.classList.remove('skeleton-grid');
                grid.innerHTML = '';
                
                // Show top 8
                state.restaurants.slice(0, 8).forEach(r => {
                    grid.appendChild(createRestaurantCard(r));
                });
                
                observeImages();
            }

            function renderNearbyRestaurants() {
                const grid = document.getElementById('nearbySlider');
                if(!grid) return;
                
                grid.classList.remove('skeleton-grid');
                grid.innerHTML = '';
                
                // Show next 8 as "nearby" (mock logic)
                state.restaurants.slice(8, 16).forEach(r => {
                    grid.appendChild(createRestaurantCard(r));
                });
                
                observeImages();
            }

            function createRestaurantCard(r) {
                const card = document.createElement('div');
                card.className = 'restaurant-card';
                card.onclick = () => location.href = `restaurant.html?slug=${r.slug}`;
                
                const status = listManager.getRestaurantListStatus(r.id);
                const heart = status.favorites ? '<div class="list-badge">‚ù§Ô∏è</div>' : '';
                const cloud = r.isCloudKitchen ? '<div class="cloud-badge"><i class="fas fa-cloud"></i></div>' : '';
                
                card.innerHTML = `
                    <div class="card-image">
                        <img class="restaurant-image" data-src="${r.coverImage}" alt="${r.name}">
                        <div class="list-badges-container">${heart}</div>
                        ${cloud}
                    </div>
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">${r.name}</h3>
                            <div class="card-rating">‚≠ê ${(r.rating||0).toFixed(1)}</div>
                        </div>
                        <div class="card-category">${r.category}</div>
                        <p class="card-description">${r.description || ''}</p>
                    </div>
                `;
                return card;
            }

            // ---------- SPOTLIGHT & FILTERS ----------
            function setupSpotlight() {
                if(!state.restaurants.length) return;
                state.spotlightRestaurants = state.restaurants.slice(0, 5);
                updateSpotlight();
                setInterval(() => {
                    state.spotlightIndex = (state.spotlightIndex + 1) % 5;
                    updateSpotlight();
                }, 5000);
            }

            function updateSpotlight() {
                const r = state.spotlightRestaurants[state.spotlightIndex];
                if(!r) return;
                
                document.getElementById('spotName').textContent = r.name;
                document.getElementById('spotDesc').textContent = r.description;
                document.getElementById('spotRating').textContent = `‚≠ê ${(r.rating||0).toFixed(1)}`;
                
                const img = document.getElementById('spotFoodImage');
                img.style.opacity = 0;
                setTimeout(() => {
                    img.src = r.coverImage;
                    img.onload = () => img.style.opacity = 1;
                }, 200);
                
                // Indicators
                const indicators = document.getElementById('slideIndicators');
                indicators.innerHTML = state.spotlightRestaurants.map((_, i) => 
                    `<div class="slide-indicator ${i === state.spotlightIndex ? 'active' : ''}"></div>`
                ).join('');
            }

            function setupRestaurantOfTheDay() {
                const r = state.restaurants[0]; // Just grab top rated
                if(!r) return;
                const container = document.getElementById('dayCard');
                // Reuse card logic but styled for Day Card
                container.innerHTML = `
                    <div class="day-card-badge">Top Pick</div>
                    <div class="card-image" style="height:300px">
                        <img class="restaurant-image loaded" src="${r.coverImage}" alt="${r.name}">
                    </div>
                    <div class="card-content">
                        <h2>${r.name}</h2>
                        <p>${r.description}</p>
                        <button class="btn-primary" onclick="location.href='restaurant.html?slug=${r.slug}'">View Restaurant</button>
                    </div>
                `;
            }

            function populateFilters() {
                const bar = document.getElementById('filterBar');
                const cats = [...new Set(state.restaurants.map(r => r.category))].slice(0, 6);
                bar.innerHTML = '<div class="filter-btn active">All</div>' + 
                    cats.map(c => `<div class="filter-btn">${c}</div>`).join('');
            }

            // ---------- AUTH ----------
            async function initializeAuth() {
                const { data: { session } } = await supabase.auth.getSession();
                if (session?.user) {
                    currentUser = session.user;
                    state.isLoggedIn = true;
                    updateUIForUser();
                    await listManager.init();
                    // Re-render to show hearts now that lists are loaded
                    renderFeaturedRestaurants();
                    renderNearbyRestaurants();
                } else {
                    document.getElementById('guestBanner').classList.add('show');
                }
            }

            function updateUIForUser() {
                const btn = document.getElementById('userAccountBtn');
                btn.innerHTML = '<i class="fas fa-user"></i> Profile';
                btn.onclick = () => location.href = 'profile.html';
                
                document.querySelector('.logged-out').style.display = 'none';
                document.querySelector('.logged-in').style.display = 'flex';
                document.getElementById('guestBanner').classList.remove('show');
            }

            // ---------- UTILS ----------
            function initImageLoader() {
                state.imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.classList.add('loaded');
                                state.imageObserver.unobserve(img);
                            }
                        }
                    });
                });
            }

            function observeImages() {
                setTimeout(() => {
                    document.querySelectorAll('img[data-src]').forEach(img => state.imageObserver.observe(img));
                }, 100);
            }

            // Start
            init();
        })();
    </script>
</body>
</html>