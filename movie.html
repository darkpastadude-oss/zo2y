<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zo2y — Movie</title>
  <link rel="icon" href="/favicon.ico?v=3" type="image/x-icon" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    :root {
      --bg: #0b1633;
      --card: #132347;
      --accent: #f59e0b;
      --text: #ffffff;
      --muted: #9fb0cf;
      --border: rgba(255,255,255,0.08);
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); }
    header { position: sticky; top: 0; z-index: 10; background: rgba(11,22,51,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); }
    .header-inner { max-width: 1200px; margin: 0 auto; padding: 14px 20px; display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    .header-title { display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 18px; }
    .header-actions { display: flex; gap: 10px; }
    .btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px; border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: var(--text); cursor: pointer; text-decoration: none; font-size: 14px; transition: all 0.2s ease; }
    .btn:hover { border-color: var(--accent); color: var(--accent); }
    .wrap { max-width: 1200px; margin: 24px auto 60px; padding: 0 20px; display: grid; grid-template-columns: 320px 1fr; gap: 24px; }
    .poster { width: 100%; border-radius: 14px; border: 1px solid var(--border); background: #0f1f40; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px; }
    .title { margin: 0 0 8px; font-size: 28px; }
    .meta { color: var(--muted); font-size: 14px; margin-bottom: 16px; }
    .overview { line-height: 1.6; color: var(--muted); }
    .tag { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); color: var(--muted); font-size: 12px; margin-right: 8px; }
    @media (max-width: 900px) { .wrap { grid-template-columns: 1fr; } .poster { max-width: 360px; } }
  </style>
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="header-title"><i class="fas fa-film"></i> Movie Details</div>
      <div class="header-actions">
        <a class="btn" href="movies.html"><i class="fas fa-arrow-left"></i> Back</a>
        <a class="btn" href="index.html"><i class="fas fa-home"></i> Home</a>
        <a class="btn" href="profile.html"><i class="fas fa-user"></i> Profile</a>
      </div>
    </div>
  </header>

  <div class="wrap">
    <img id="poster" class="poster" src="images/placeholder.jpg" alt="Poster">
    <div class="card">
      <h1 id="title" class="title">Loading...</h1>
      <div id="meta" class="meta"></div>
      <div id="tags"></div>
      <p id="overview" class="overview"></p>
    </div>
  </div>

  <script>
    (function () {
      const TMDB_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI4NzVjMDM5N2IxZGUxYzU3NjQ4ZmRiNjJiZGQ5NmI0OSIsIm5iZiI6MTc3MDU4Mzk1NC42NTc5OTk4LCJzdWIiOiI2OTg4Zjc5MmFlYTFkN2NjNjcyY2VlNDciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.1RMWLft0Yl73gfhkCXtnqBIzRQHdaoLfZFYXYN7jm7s';
      const TMDB_BASE = 'https://api.themoviedb.org/3';
      const POSTER_BASE = 'https://image.tmdb.org/t/p/w500';
      const params = new URLSearchParams(window.location.search);
      const id = params.get('id');

      async function tmdbFetch(path) {
        const res = await fetch(TMDB_BASE + path, {
          headers: { Authorization: `Bearer ${TMDB_TOKEN}` }
        });
        if (!res.ok) throw new Error('TMDB error');
        return res.json();
      }

      async function load() {
        if (!id) return;
        const data = await tmdbFetch(`/movie/${id}?language=en`);
        document.getElementById('title').textContent = data.title || 'Untitled';
        document.getElementById('overview').textContent = data.overview || 'No description available.';
        document.getElementById('meta').textContent = `${data.release_date || ''} • ${data.runtime || ''} min`;
        document.getElementById('poster').src = data.poster_path ? POSTER_BASE + data.poster_path : 'images/placeholder.jpg';
        const tags = document.getElementById('tags');
        if (tags && Array.isArray(data.genres)) {
          tags.innerHTML = data.genres.map(g => `<span class="tag">${g.name}</span>`).join('');
        }
      }

      load();
    })();
  </script>
</body>
</html>
