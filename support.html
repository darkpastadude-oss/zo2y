<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zo2y Support</title>
  <style>
    :root {
      --bg: #0b1633;
      --card: #132347;
      --text: #f8fafc;
      --muted: #cbd5e1;
      --accent: #f59e0b;
      --border: rgba(255,255,255,0.12);
      --ok: #10b981;
      --err: #ef4444;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(180deg, #07122a 0%, var(--bg) 45%, #08122c 100%);
      color: var(--text);
      line-height: 1.5;
    }
    .wrap { width: min(860px, calc(100% - 28px)); margin: 24px auto 36px; }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
    }
    h1 { margin-top: 0; }
    p { color: var(--muted); }
    label { display: block; margin-bottom: 7px; font-weight: 600; }
    .field { margin-bottom: 14px; }
    input, textarea, select {
      width: 100%;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #0f1e41;
      color: var(--text);
      padding: 11px 12px;
      font-family: inherit;
      font-size: 14px;
    }
    textarea { min-height: 140px; resize: vertical; }
    .actions { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .btn {
      border: none;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 700;
      cursor: pointer;
      background: var(--accent);
      color: #0b1633;
    }
    .btn.secondary {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
    }
    .status { font-size: 13px; }
    .status.ok { color: var(--ok); }
    .status.err { color: var(--err); }
    .links { margin-top: 10px; display: flex; gap: 12px; flex-wrap: wrap; }
    .links a { color: var(--accent); }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card">
      <h1>Support</h1>
      <p>Report a bug, account issue, or request a feature. We will review your ticket as soon as possible.</p>

      <form id="supportForm">
        <div class="field">
          <label for="supportName">Name</label>
          <input id="supportName" name="name" maxlength="120" autocomplete="name">
        </div>
        <div class="field">
          <label for="supportEmail">Email (optional)</label>
          <input id="supportEmail" name="email" type="email" maxlength="180" autocomplete="email">
        </div>
        <div class="field">
          <label for="supportCategory">Category</label>
          <select id="supportCategory" name="category" required>
            <option value="bug">Bug</option>
            <option value="account">Account</option>
            <option value="billing">Billing</option>
            <option value="feature">Feature Request</option>
            <option value="abuse">Abuse Report</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="field">
          <label for="supportMessage">Message</label>
          <textarea id="supportMessage" name="message" minlength="12" maxlength="4000" required placeholder="Please include steps, what happened, and what you expected."></textarea>
        </div>

        <div class="field hidden">
          <label for="website">Website</label>
          <input id="website" name="website" tabindex="-1" autocomplete="off">
        </div>

        <div class="actions">
          <button class="btn" type="submit" data-track="support_ticket_submit">Submit Ticket</button>
          <a class="btn secondary" href="index.html">Back Home</a>
          <span id="supportStatus" class="status" aria-live="polite"></span>
        </div>
      </form>

      <div class="links">
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
      </div>
    </section>
  </main>

  <script>
    (function() {
      const form = document.getElementById('supportForm');
      const status = document.getElementById('supportStatus');
      if (!form || !status) return;

      function setStatus(message, isError) {
        status.textContent = message || '';
        status.classList.toggle('ok', !isError);
        status.classList.toggle('err', !!isError);
      }

      form.addEventListener('submit', async (event) => {
        event.preventDefault();
        setStatus('Submitting...', false);

        const payload = {
          name: String(form.name.value || '').trim(),
          email: String(form.email.value || '').trim(),
          category: String(form.category.value || 'other').trim().toLowerCase(),
          message: String(form.message.value || '').trim(),
          page_url: window.location.href,
          website: String(form.website.value || '').trim()
        };

        if (!payload.message || payload.message.length < 12) {
          setStatus('Please provide more detail in your message.', true);
          return;
        }

        try {
          const response = await fetch('/api/support/tickets', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const result = await response.json().catch(() => ({}));
          if (!response.ok) {
            setStatus(result.message || 'Could not submit support ticket.', true);
            return;
          }

          setStatus('Ticket submitted. Thanks, we will follow up soon.', false);
          form.reset();
          if (window.ZO2Y_ANALYTICS && typeof window.ZO2Y_ANALYTICS.track === 'function') {
            window.ZO2Y_ANALYTICS.track('support_ticket_created', { category: payload.category });
          }
        } catch (_err) {
          setStatus('Network error while submitting support ticket.', true);
        }
      });
    })();
  </script>
  <script src="js/production-runtime.js?v=20260227d" defer></script>
</body>
</html>



